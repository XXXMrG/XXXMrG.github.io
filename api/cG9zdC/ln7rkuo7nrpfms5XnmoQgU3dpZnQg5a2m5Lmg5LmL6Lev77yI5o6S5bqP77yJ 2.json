{"title":"åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰","date":"2019-03-16T15:15:00.000Z","thumbnail":"https://xkeith.space/static/halo-frontend/images/thumbnail/thumbnail-5.jpg","link":"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰","tags":["Swift"],"categories":["iOS & Swift"],"updated":"2019-03-16T17:00:00.008Z","content":"<hr>\n<h2 id=\"æ’åº\">æ’åº<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#æ’åº\"></a></h2><p>è¿™é‡Œç»™å‡ºäº†å…­å¤§æ’åºçš„ Swift è¯­è¨€å®ç°ï¼Œå¤§éƒ¨åˆ†ä»£ç æ˜¯åŸºäºç®—æ³•4th çš„ JAVA å®ç°ç›´æ¥å®ç°çš„ï¼Œä¹Ÿæœ‰å……åˆ†åˆ©ç”¨ Swift è¯­è¨€ç‰¹æ€§çš„æ›´ä¸ºç®€æ´çš„å®ç°ã€‚<br>ä»£ç ä¸­æ¶‰åŠåˆ°çš„ Swift ç‰¹æ€§ï¼Œæˆ‘é€‰æ‹©ç”¨ç®—æ³•è¿™æ ·ä¸€ç§å®é™…åº”ç”¨æƒ…å†µæ¥ä¸ºå¤§å®¶é˜è¿°ï¼Œæ›´ä¸ºæ˜“æ‡‚å’Œå®ç”¨ã€‚</p>\n<h2 id=\"é€‰æ‹©æ’åº\">é€‰æ‹©æ’åº<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#é€‰æ‹©æ’åº\"></a></h2><figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">selectionSort</span>&lt;T: Comparable&gt;<span class=\"params\">(<span class=\"number\">_</span> array: [T])</span></span> -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = array</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"type\">N</span> = a.<span class=\"built_in\">count</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"built_in\">count</span> = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"number\">0</span>..&lt;<span class=\"type\">N</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> <span class=\"built_in\">min</span> = i</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> (i + <span class=\"number\">1</span>)..&lt;<span class=\"type\">N</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> a[j] &lt; a[<span class=\"built_in\">min</span>] &#123;</span><br><span class=\"line\">                <span class=\"built_in\">min</span> = j</span><br><span class=\"line\">                <span class=\"built_in\">count</span> += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// Array åº“å‡½æ•°ï¼Œäº¤æ¢ä¸¤ä¸ªå…ƒç´ </span></span><br><span class=\"line\">        a.swapAt(i, <span class=\"built_in\">min</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"selectionSort cost \\(count)\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>æœ€ç®€å•çš„æ’åºæ–¹å¼ï¼Œä¸æ–­é€‰æ‹©æœ€å°çš„å…ƒç´ ç§»åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤æ˜¯ä¸ªç¨³å®šçš„ç®—æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬è¦å¼ºè°ƒçš„æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬åœ¨ä¸‹é¢ç»å¸¸ç”¨åˆ°çš„ Array.swapAt(_ : Int, _ : Int) ï¼ŒSwift ç›´æ¥ä¸ºæˆ‘ä»¬å°è£…å¥½äº†äº¤æ¢æ•°ç»„ä¸¤ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼Œç®€å•è€Œé«˜æ•ˆã€‚<br>æ¥ä¸‹æ¥è¦è¯´çš„å°±æ˜¯ Swift ä¸­çš„æ³›å‹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸ºæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªæ³›å‹ T å¹¶ä¸”è¦æ±‚è¿™ä¸ªæ³›å‹è¦å®ç° Comparable åè®®ï¼Œè¿™äºç®—å››é‡Œç›´æ¥ä½¿ç”¨ JAVA ä¸­çš„ Comparable è¶…ç±»å·®ä¸å¤šï¼Œä½†æ˜¯æ³›å‹å°±æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™æ˜ç¡®æŒ‡å‡ºè¿™ä¸ªæ³›å‹çš„çœŸæ­£ç±»å‹ï¼Œè¿™ç§é—®é¢˜å¸¸å¸¸å¹¶ä¸ä¼šå‡ºç°åœ¨å‡½æ•°æ³›å‹çš„ä½¿ç”¨ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬æ—¢ç„¶ä¸ºå‡½æ•°å£°æ˜äº†æ³›å‹ï¼Œå°±ä¸€å®šä¼šä¸ºå…¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼ŒSwift ä¼šé€šè¿‡å‚æ•°è‡ªåŠ¨æ¨æ–­å‡ºè¯¥æ³›å‹ã€‚<br>ä½†æ˜¯æˆ‘ä»¬è¦çŸ¥é“ï¼ŒåŒæ ·çš„æ³›å‹å£°æ˜æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥åœ¨ç±»èº«ä¸Šçš„ï¼Œæˆ‘ä»¬åœ¨ JAVA ä¸­ä¸ºä¸€ä¸ªæ³›å‹ç±»å£°æ˜çš„æ—¶å€™è¦æ˜æ˜¾çš„ç»™å‡ºå®é™…ç±»å‹ï¼Œä½†æ˜¯åœ¨ Swift ä¸­ï¼Œæˆ‘ä»¬é™¤äº†è¿™æ ·æ˜¾ç¤ºç»™å‡ºæ³›å‹å¤–ï¼Œå¦‚æœæˆ‘ä»¬çš„æ„é€ æ–¹æ³•é‡Œä¼ å…¥äº†è¯¥ç±»å‹çš„å‚æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ— éœ€å†é‡å¤å£°æ˜æ³›å‹ï¼ŒSwift ä¼šå¸®æˆ‘ä»¬æ¨æ–­å‡ºè¯¥æ³›å‹ï¼ŒåŒæ—¶å¯¹äºè¿™ä¸ªå¯¹è±¡æœ¬èº«ï¼Œè¯¥æ³›å‹å·²ç»ç¡®å®šï¼Œä¸èƒ½å†æ›´æ”¹äº†ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸€ä¸ªç±»ä¸­ä¸¤ä¸ªæ³›å‹çš„å›°æ‰°ã€‚<br>å…³äº Comparable åè®®ï¼Œä»»ä½•éµå¾ªäº†è¯¥åè®®çš„å˜é‡éƒ½è‡ªåŠ¨æ‹¥æœ‰è¯¥åè®®ä¸­åŒ…å«çš„å‡ ä¸ªæ–¹æ³• <code>&lt; &gt; &lt;= &gt;=</code> ç­‰ï¼Œä¹Ÿå°±è·Ÿå…¶å­—é¢æ„æ€ç›¸åŒï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ¯”è¾ƒçš„å˜é‡ã€‚<br>åŒæ ·çš„åè®®è¿˜æœ‰ Equalable ï¼Œå…¶åŒ…å«çš„æ–¹æ³•æ˜¯ <code>== != `</code></p>\n<h2 id=\"æ’å…¥æ’åºï¼ˆå†’æ³¡æ’åºï¼‰\">æ’å…¥æ’åºï¼ˆå†’æ³¡æ’åºï¼‰<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#æ’å…¥æ’åºï¼ˆå†’æ³¡æ’åºï¼‰\"></a></h2><figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">insertionSort</span>&lt;T&gt;<span class=\"params\">(<span class=\"number\">_</span> array: [T], <span class=\"number\">_</span> isOrderedBefore: <span class=\"params\">(T, T)</span></span></span> -&gt; <span class=\"type\">Bool</span>) -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = array</span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"built_in\">count</span> = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"number\">1</span>..&lt;a.<span class=\"built_in\">count</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> y = x</span><br><span class=\"line\">        <span class=\"keyword\">while</span> y &gt; <span class=\"number\">0</span> &amp;&amp; isOrderedBefore(a[y], a[y - <span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">            a.swapAt(y - <span class=\"number\">1</span>, y)</span><br><span class=\"line\">            <span class=\"built_in\">count</span> += <span class=\"number\">1</span></span><br><span class=\"line\">            y -= <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"insert cost \\(count)\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>æ’å…¥æ’åºï¼Œå¾ˆå¤šé«˜çº§æ’åºçš„åŸºç¡€ï¼Œä¹Ÿæ˜¯å¯¹äºå°å‹æ•°ç»„æ’åºæœ€å¿«çš„æ’åºæ–¹æ³•ã€‚<br>å¯¹äºæœ‰åºæ•°ç»„ä¹Ÿæœ‰ç€å¾ˆé«˜çš„æ’åºæ•ˆç‡</p>\n<p>è¿™é‡Œæ¶‰åŠçš„ Swift ç‰¹æ€§åœ¨äºé‚£ä¸ªç‰¹åˆ«é•¿çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªå‡½æ•°å‚æ•°ã€‚<br>æˆ‘ä»¬çŸ¥é“åœ¨ Swift ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºè¿”å›å€¼å’Œå‚æ•°ç›´æ¥ä½¿ç”¨ã€‚<br>è¿™ä¸€æ¬¡æˆ‘ä»¬çš„æ³›å‹å¹¶æ²¡æœ‰ç›´æ¥å®ç° Comparable åè®®ï¼Œè€Œæ˜¯ç”¨äº†ä¸€ä¸ªå‡½æ•°ç›´æ¥å°†æ“ä½œç¬¦ <code>&gt; &lt;</code> ç›´æ¥å½“ä½œå‚æ•°ä¼ å…¥ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å‚æ•°æ¥æ§åˆ¶é€’å¢æ’åºå’Œé€’å‡æ’åºï¼Œå…³äº Swift ä¸­çš„æ“ä½œç¬¦ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é‡è½½ä¸ºå…¶å¢åŠ æ›´å¤šçš„æ–¹æ³•ã€‚</p>\n<h2 id=\"å¸Œå°”æ’åº\">å¸Œå°”æ’åº<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#å¸Œå°”æ’åº\"></a></h2><figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">shellSort</span>&lt;T&gt; <span class=\"params\">(<span class=\"number\">_</span> array: [T], <span class=\"number\">_</span> isOrderedBefore: <span class=\"params\">(T, T)</span></span></span> -&gt; <span class=\"type\">Bool</span>) -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = array</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"type\">N</span> = a.<span class=\"built_in\">count</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> h = <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"built_in\">count</span> = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"comment\">// é€’å¢åºåˆ—</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> h &lt; <span class=\"type\">N</span> / <span class=\"number\">3</span> &#123;</span><br><span class=\"line\">        h = <span class=\"number\">3</span> * h + <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> h &gt;= <span class=\"number\">1</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> h..&lt;<span class=\"type\">N</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> j = i</span><br><span class=\"line\">            <span class=\"keyword\">while</span> j &gt;= h &amp;&amp; isOrderedBefore(a[j], a[j-h]) &#123;</span><br><span class=\"line\">                a.swapAt(j, j-h)</span><br><span class=\"line\">                <span class=\"built_in\">count</span> += <span class=\"number\">1</span></span><br><span class=\"line\">                <span class=\"comment\">//print(a)</span></span><br><span class=\"line\">                j -= h</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        h = h / <span class=\"number\">3</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"shell cost \\(count)\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>æ’å…¥æ’åºçš„ä¼˜åŒ–ç‰ˆï¼Œé€šè¿‡é€’å¢åºåˆ—ä½¿å…¶æ€§èƒ½å¤§å¤§æå‡ã€‚</p>\n<h2 id=\"å½’å¹¶æ’åº\">å½’å¹¶æ’åº<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#å½’å¹¶æ’åº\"></a></h2><p>è¿™ä¹Ÿæ˜¯ä¸ªç¨³å®šçš„æ’åº</p>\n<figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Merge</span>&lt;<span class=\"title\">T</span>: <span class=\"title\">Comparable</span>&gt; </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> aux = [<span class=\"type\">T</span>]()</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = [<span class=\"type\">T</span>]()</span><br><span class=\"line\">    <span class=\"keyword\">init</span>(<span class=\"number\">_</span> array: [<span class=\"type\">T</span>]) &#123;</span><br><span class=\"line\">        data = array</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.mergeSort(&amp;data, lo: <span class=\"number\">0</span>, hi: data.<span class=\"built_in\">count</span> - <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ inout æ¥æ“ä½œå®é™…å‚æ•°</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">merge</span><span class=\"params\">(<span class=\"number\">_</span> array: <span class=\"keyword\">inout</span> [T], <span class=\"number\">_</span> lo: Int, <span class=\"number\">_</span> mid: Int, <span class=\"number\">_</span> hi: Int)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> i = lo</span><br><span class=\"line\">        <span class=\"keyword\">var</span> j = mid + <span class=\"number\">1</span></span><br><span class=\"line\">        aux = array</span><br><span class=\"line\">        <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> lo...hi &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i &gt; mid &#123;</span><br><span class=\"line\">                array[k] = aux[j]</span><br><span class=\"line\">                j += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> j &gt; hi &#123;</span><br><span class=\"line\">                array[k] = aux[i]</span><br><span class=\"line\">                i += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> aux[j] &lt; aux[i] &#123;</span><br><span class=\"line\">                array[k] = aux[j]</span><br><span class=\"line\">                j += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                array[k] = aux[i]</span><br><span class=\"line\">                i += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// merge high to low</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">mergeSort</span><span class=\"params\">(<span class=\"number\">_</span> array: <span class=\"keyword\">inout</span> [T], lo: Int, hi: Int)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> hi &lt;= lo &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">let</span> mid = lo + (hi - lo) / <span class=\"number\">2</span></span><br><span class=\"line\">        mergeSort(&amp;array, lo: lo, hi: mid)</span><br><span class=\"line\">        mergeSort(&amp;array, lo: mid + <span class=\"number\">1</span>, hi: hi)</span><br><span class=\"line\">        merge(&amp;array, lo, mid, hi)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// merge low to high</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">mergeBU</span><span class=\"params\">(<span class=\"number\">_</span> array: [T])</span></span> -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> a = array</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"type\">N</span> = a.<span class=\"built_in\">count</span></span><br><span class=\"line\">        <span class=\"comment\">// å½’å¹¶å­æ•°ç»„å¤§å°</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> sz = <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> sz &lt; <span class=\"type\">N</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> lo = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> lo &lt; <span class=\"type\">N</span> - sz &#123;</span><br><span class=\"line\">                <span class=\"comment\">// ç”¨ N - 1 é˜²æ­¢æ•°ç»„è¶Šç•Œ</span></span><br><span class=\"line\">                merge(&amp;a, lo, lo+sz-<span class=\"number\">1</span>, <span class=\"built_in\">min</span>(lo+sz+sz-<span class=\"number\">1</span>, <span class=\"type\">N</span>-<span class=\"number\">1</span>))</span><br><span class=\"line\">                <span class=\"comment\">// å‚ä¸å½’å¹¶çš„æ•°ç»„å¤§å°æ˜¯å­æ•°ç»„çš„ä¸¤å€</span></span><br><span class=\"line\">                lo += sz + sz</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            sz = sz + sz</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// ä¸æ“ä½œåŸæ•°ç»„çš„æ–¹å¼</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">merge</span><span class=\"params\">(leftPile: [T], rightPile: [T])</span></span> -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 1</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> leftIndex = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> rightIndex = <span class=\"number\">0</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 2</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> orderedPile = [<span class=\"type\">T</span>]()</span><br><span class=\"line\">        <span class=\"comment\">// ä¸ºæ•°ç»„ç”³è¯·å¤‡ç”¨å®¹é‡ï¼Œå‡å°‘é•¿åº¦åŠ¨æ€å˜åŒ–çš„å¼€é”€</span></span><br><span class=\"line\">        orderedPile.reserveCapacity(leftPile.<span class=\"built_in\">count</span> + rightPile.<span class=\"built_in\">count</span>)</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 3</span></span><br><span class=\"line\">        <span class=\"comment\">// ä¸¤ä¸ªå½’å¹¶çš„æ•°ç»„æœ‰ä¸€ä¸ªç”¨å®Œå°±ä¼šåœæ­¢åˆ¤æ–­</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> leftIndex &lt; leftPile.<span class=\"built_in\">count</span> &amp;&amp; rightIndex &lt; rightPile.<span class=\"built_in\">count</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> leftPile[leftIndex] &lt; rightPile[rightIndex] &#123;</span><br><span class=\"line\">                orderedPile.append(leftPile[leftIndex])</span><br><span class=\"line\">                leftIndex += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> leftPile[leftIndex] &gt; rightPile[rightIndex] &#123;</span><br><span class=\"line\">                orderedPile.append(rightPile[rightIndex])</span><br><span class=\"line\">                rightIndex += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å¦‚æœä¸€æ ·å¤§ï¼Œå„æ”¾å…¥å½’å¹¶çš„æ•°ç»„ä¸€æ¬¡</span></span><br><span class=\"line\">                orderedPile.append(leftPile[leftIndex])</span><br><span class=\"line\">                leftIndex += <span class=\"number\">1</span></span><br><span class=\"line\">                orderedPile.append(rightPile[rightIndex])</span><br><span class=\"line\">                rightIndex += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 4</span></span><br><span class=\"line\">        <span class=\"comment\">// å³ä¾§æ•°ç»„ç”¨å®Œ</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> leftIndex &lt; leftPile.<span class=\"built_in\">count</span> &#123;</span><br><span class=\"line\">            orderedPile.append(leftPile[leftIndex])</span><br><span class=\"line\">            leftIndex += <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// å·¦ä¾§æ•°ç»„ç”¨å®Œ</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> rightIndex &lt; rightPile.<span class=\"built_in\">count</span> &#123;</span><br><span class=\"line\">            orderedPile.append(rightPile[rightIndex])</span><br><span class=\"line\">            rightIndex += <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> orderedPile</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">mergeSort</span><span class=\"params\">(<span class=\"number\">_</span> array: [T])</span></span> -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">        <span class=\"comment\">// guard æ›´å…³æ³¨çš„æ˜¯ else</span></span><br><span class=\"line\">        <span class=\"keyword\">guard</span> array.<span class=\"built_in\">count</span> &gt; <span class=\"number\">1</span> <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> array &#125;    <span class=\"comment\">// 1</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">let</span> middleIndex = array.<span class=\"built_in\">count</span> / <span class=\"number\">2</span>              <span class=\"comment\">// 2</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">let</span> leftArray = mergeSort(<span class=\"type\">Array</span>(array[<span class=\"number\">0</span>..&lt;middleIndex]))             <span class=\"comment\">// 3</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">let</span> rightArray = mergeSort(<span class=\"type\">Array</span>(array[middleIndex..&lt;array.<span class=\"built_in\">count</span>]))  <span class=\"comment\">// 4</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> merge(leftPile: leftArray, rightPile: rightArray)             <span class=\"comment\">// 5</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>æ¶‰åŠåˆ°çš„ Swift ç‰¹æ€§ï¼š</p>\n<ul>\n<li>Array.reserveCapacity</li>\n<li>inout å’Œ &amp;</li>\n<li>subsequence</li>\n</ul>\n<p>åœ¨å½’å¹¶æ’åºä¸­ï¼Œæˆ‘ä»¬åœ¨çŸ¥é“éœ€è¦çš„é¢å¤–æ•°ç»„é•¿åº¦çš„æƒ…å†µä¸‹ä½¿ç”¨äº† reserveCapacity è¿™ä¸ªæ–¹æ³•æ¥ä¸ºæ•°ç»„å¢åŠ å¤‡ç”¨å®¹é‡ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ Swift ä¸­çš„æ•°ç»„è·Ÿ js python ç›¸åŒï¼Œéƒ½æ˜¯åŠ¨æ€æ•°ç»„ï¼Œå¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯ä¸éœ€è¦å…³å¿ƒæ•°ç»„å¤§å°çš„ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§äº‹å‰ä¸ºæ•°ç»„å¢åŠ å®¹é‡çš„æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬åœ¨éœ€è¦å¤§é‡ append æ“ä½œçš„æ—¶å€™å‡å°‘ç³»ç»Ÿæ¶ˆè€—ã€‚</p>\n<p>inout å’Œ &amp; ï¼ŒSwift ä¸ JAVA ä¸åŒï¼Œå¯¹äºå¯¹è±¡ç±»å‚æ•°çš„å¤„ç†æ˜¯ç›´æ¥ä¿®æ”¹å…¶åŸå¯¹è±¡ä¿¡æ¯ã€‚Swift ä»ç„¶ç»§æ‰¿äº† C çš„åŸºç¡€ï¼Œå¯¹è±¡å‹å‚æ•°ä¼šå¤åˆ¶ä¸€ä»½åˆ°å‡½æ•°ä¸­ï¼ŒåŒæ—¶ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸ª let å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥æ“ä½œè¿™ä¸ªå˜é‡ï¼Œå¯¹è¿™ä¸ªå˜é‡çš„æ“ä½œå°±æ›´ä¸å¯èƒ½å½±å“åˆ°å‡½æ•°å¤–ã€‚è¿™æ˜¯ Swift ä¸ºäº†è´¯å½»å…¶å®‰å…¨çš„ç†å¿µçš„æªæ–½ã€‚<br>é‚£ä¹ˆå¯¹äºéœ€è¦ç›´æ¥æ›´æ”¹å®é™…å˜é‡çš„æ“ä½œå‘¢ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ° inout å’Œ &amp; è¿™ä¸€å¯¹æ“ä½œç¬¦ï¼Œæœ‰ä¸€ç‚¹åƒ C ä¸­çš„æŒ‡é’ˆï¼Œå¸¦æœ‰ inout çš„å‚æ•°æ‰èƒ½è¢«ç›´æ¥è®¿é—®å’Œä¿®æ”¹ã€‚</p>\n<p>subsequence ï¼Œåœ¨æœ€åçš„æ–¹æ³•ä¸­æˆ‘ä»¬ç›´æ¥ä½¿ç”¨åŒºé—´è¿ç®—ä½œä¸ºæ•°ç»„çš„ä¸‹æ ‡æ¥è®¿é—®åŒä¸€ä¸ªæ•°ç»„çš„å‰åä¸¤éƒ¨åˆ†ï¼Œä½†æ˜¯æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ ·å¾—åˆ°çš„å®é™…ä¸Šå¹¶éæ˜¯ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸ªéµå®ˆäº† subsequence çš„ç±»å‹ï¼Œè€Œæ•°ç»„ï¼Œä»–å®ç°çš„æ˜¯ sequence åè®®ï¼Œè¿™ä¸¤ä¸ªè¿˜ä¸å¤ªä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¼ å…¥å‚æ•°çš„æ—¶å€™å°†å…¶è¿›è¡Œäº†ç±»å‹è½¬æ¢ã€‚</p>\n<h2 id=\"å¿«é€Ÿæ’åº\">å¿«é€Ÿæ’åº<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#å¿«é€Ÿæ’åº\"></a></h2><figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Quick</span>&lt;<span class=\"title\">T</span>: <span class=\"title\">Comparable</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data: [<span class=\"type\">T</span>]</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">init</span>(<span class=\"number\">_</span> array: [<span class=\"type\">T</span>]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.data = array</span><br><span class=\"line\">        <span class=\"comment\">// æ‰“ä¹±ä¸€ä¸ªæ•°ç»„ shuffle, shuffled</span></span><br><span class=\"line\">        <span class=\"comment\">// https://developer.apple.com/documentation/swift/array/2994757-shuffled</span></span><br><span class=\"line\">        data.shuffle()</span><br><span class=\"line\">        <span class=\"comment\">//sort(&amp;data, lo: 0, hi: data.count - 1)</span></span><br><span class=\"line\">        <span class=\"comment\">//quick3Sort(&amp;data, lo: 0, hi: data.count - 1)</span></span><br><span class=\"line\">        data = quicksort(data)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æœ€ç»å…¸çš„åˆ‡åˆ†æ–¹å¼ï¼Œå–ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">sort</span><span class=\"params\">(<span class=\"number\">_</span> array: <span class=\"keyword\">inout</span> [T], lo: Int, hi: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> hi &lt;= lo &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> j = <span class=\"built_in\">partition</span>(&amp;array, lo: lo, hi: hi)</span><br><span class=\"line\">        <span class=\"built_in\">sort</span>(&amp;array, lo: lo, hi: j - <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"built_in\">sort</span>(&amp;array, lo: j + <span class=\"number\">1</span>, hi: hi)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æ‰‹å†™ partition å®é™…ä¸Šå¯ä»¥ä½¿ç”¨é«˜çº§æ“ä½œç¬¦ filter æ¥ç›´æ¥å®Œæˆåˆ‡åˆ†</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">partition</span><span class=\"params\">(<span class=\"number\">_</span> array: <span class=\"keyword\">inout</span> [T], lo: Int, hi: Int)</span></span> -&gt; <span class=\"type\">Int</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> i = lo</span><br><span class=\"line\">        <span class=\"keyword\">var</span> j = hi + <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> v = array[lo]</span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"literal\">true</span> &#123;</span><br><span class=\"line\">            i += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> array[i] &gt; v &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> i == hi &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                i += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            j -= <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> v &gt; array[j] &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> j == lo &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                j -= <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i &gt;= j &#123;</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            array.swapAt(i, j)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        array.swapAt(lo, j)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> j</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// æ›´ç®€æ´çš„å†™æ³•</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">quicksortHoare</span><span class=\"params\">(<span class=\"number\">_</span> a: <span class=\"keyword\">inout</span> [T], low: Int, high: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> low &lt; high &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> p = partitionHoare(&amp;a, low: low, high: high)</span><br><span class=\"line\">            quicksortHoare(&amp;a, low: low, high: p)</span><br><span class=\"line\">            quicksortHoare(&amp;a, low: p + <span class=\"number\">1</span>, high: high)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">partitionHoare</span><span class=\"params\">(<span class=\"number\">_</span> a: <span class=\"keyword\">inout</span> [T], low: Int, high: Int)</span></span> -&gt; <span class=\"type\">Int</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> pivot = a[low]</span><br><span class=\"line\">        <span class=\"keyword\">var</span> i = low - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> j = high + <span class=\"number\">1</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"literal\">true</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">repeat</span> &#123; j -= <span class=\"number\">1</span> &#125; <span class=\"keyword\">while</span> a[j] &gt; pivot</span><br><span class=\"line\">            <span class=\"keyword\">repeat</span> &#123; i += <span class=\"number\">1</span> &#125; <span class=\"keyword\">while</span> a[i] &lt; pivot</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"keyword\">if</span> i &lt; j &#123;</span><br><span class=\"line\">                a.swapAt(i, j)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> j</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä¸‰å‘åˆ‡åˆ†</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">quick3Sort</span><span class=\"params\">(<span class=\"number\">_</span> array: <span class=\"keyword\">inout</span> [T], lo: Int, hi: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> hi &lt;= lo &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> lt = lo, i = lo + <span class=\"number\">1</span>, gt = hi</span><br><span class=\"line\">        <span class=\"keyword\">let</span> v = array[lo]</span><br><span class=\"line\">        <span class=\"keyword\">while</span> i &lt;= gt &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> array[i] &lt; v &#123;</span><br><span class=\"line\">                array.swapAt(lt, i)</span><br><span class=\"line\">                lt += <span class=\"number\">1</span></span><br><span class=\"line\">                i += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> v &lt; array[i] &#123;</span><br><span class=\"line\">                array.swapAt(i, gt)</span><br><span class=\"line\">                gt -= <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                i += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        quick3Sort(&amp;array, lo: lo, hi: lt - <span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        quick3Sort(&amp;array, lo: gt + <span class=\"number\">1</span>, hi: hi)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸‰é¡¹åˆ‡åˆ†ï¼Œåˆ©ç”¨é«˜çº§å‡½æ•°ï¼Œæ•ˆç‡å¹¶ä¸å¤ªé«˜</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">quicksort</span>&lt;T: Comparable&gt;<span class=\"params\">(<span class=\"number\">_</span> a: [T])</span></span> -&gt; [<span class=\"type\">T</span>] &#123;</span><br><span class=\"line\">        <span class=\"keyword\">guard</span> a.<span class=\"built_in\">count</span> &gt; <span class=\"number\">1</span> <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> a &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//let pivot = a[a.count/2]</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> pivot = a[<span class=\"number\">0</span>]</span><br><span class=\"line\">        <span class=\"keyword\">let</span> less = a.<span class=\"built_in\">filter</span> &#123; $<span class=\"number\">0</span> &lt; pivot &#125;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"built_in\">equal</span> = a.<span class=\"built_in\">filter</span> &#123; $<span class=\"number\">0</span> == pivot &#125;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> greater = a.<span class=\"built_in\">filter</span> &#123; $<span class=\"number\">0</span> &gt; pivot &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> quicksort(less) + <span class=\"built_in\">equal</span> + quicksort(greater)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸‰å‘åˆ‡åˆ†ï¼Œå–æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">partitionLomuto</span>&lt;T: Comparable&gt;<span class=\"params\">(<span class=\"number\">_</span> a: <span class=\"keyword\">inout</span> [T], low: Int, high: Int)</span></span> -&gt; <span class=\"type\">Int</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> pivot = a[high]</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">var</span> i = low</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> low..&lt;high &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> a[j] &lt;= pivot &#123;</span><br><span class=\"line\">                (a[i], a[j]) = (a[j], a[i])</span><br><span class=\"line\">                i += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        (a[i], a[high]) = (a[high], a[i])</span><br><span class=\"line\">        <span class=\"keyword\">return</span> i</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">quicksortLomuto</span>&lt;T: Comparable&gt;<span class=\"params\">(<span class=\"number\">_</span> a: <span class=\"keyword\">inout</span> [T], low: Int, high: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> low &lt; high &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> p = partitionLomuto(&amp;a, low: low, high: high)</span><br><span class=\"line\">            quicksortLomuto(&amp;a, low: low, high: p - <span class=\"number\">1</span>)</span><br><span class=\"line\">            quicksortLomuto(&amp;a, low: p + <span class=\"number\">1</span>, high: high)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>å¤©ä¸‹ç¬¬ä¸€çš„å¿«æ’</p>\n<p>æ¶‰åŠåˆ°çš„ Swift ç‰¹æ€§ï¼š<br>æœ‰å‡ ä¸ªæ•°ç»„é«˜çº§æ“ä½œï¼š</p>\n<ul>\n<li>shuffle()</li>\n<li>filter</li>\n</ul>\n<p>shuffle å’Œ shuffled ï¼Œæ±‚æ±‚ä½ ä»¬ä¸è¦å†ğŸ¦å‡ æŠŠæ‰‹å†™é‚£äº›é¬¼éšæœºæ‰“ä¹±ç®—æ³•äº†ï¼Œäººå®¶å†™çš„å¥½å¥½çš„ï¼Œä¸€ä¸ªç›´æ¥æ“ä½œæ•°ç»„ï¼Œä¸€ä¸ªè¿”å›æ‰“ä¹±åçš„æ•°ç»„ã€‚</p>\n<p>filter è¿™æ˜¯ä¸ª Swift 4.2+ å¢åŠ çš„æ–°æ–¹æ³•ï¼Œç”¨äºç›´æ¥é€‰å‡ºæ•°ç»„ä¸­ç¬¦åˆæŸä¸€ç±»æ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯ä¸ªæ•°ç»„ï¼Œç”¨åœ¨å¿«æ’é‡Œç®€ç›´çˆ½åˆ°é£èµ·ï¼Œä½†æ˜¯åº”è¯¥æ˜¯ç°åœ¨çš„ oj éƒ½è¿˜ä¸æ”¯æŒè¿™ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•å’Œ reduce ï¼Œ map éƒ½å¯èƒ½æ˜¯é¢è¯•ä¸­çš„é‡ç‚¹ã€‚</p>\n<h2 id=\"å †æ’åº\">å †æ’åº<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#å †æ’åº\"></a></h2><figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å †å’Œä¼˜å…ˆé˜Ÿåˆ—</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Heap</span>&lt;<span class=\"title\">T</span>: <span class=\"title\">Comparable</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> data = [<span class=\"type\">T</span>]()</span><br><span class=\"line\">    <span class=\"keyword\">var</span> <span class=\"type\">N</span> = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">init</span>(size: <span class=\"type\">Int</span>) &#123;</span><br><span class=\"line\">        data.reserveCapacity(size + <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">insert</span><span class=\"params\">(new: T)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"type\">N</span> += <span class=\"number\">1</span></span><br><span class=\"line\">        data.append(new)</span><br><span class=\"line\">        swim(<span class=\"type\">N</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å¤§å…ƒç´ ä¸Šæµ®</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">swim</span><span class=\"params\">(<span class=\"number\">_</span> k: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> k = k</span><br><span class=\"line\">        <span class=\"keyword\">while</span> k &gt; <span class=\"number\">1</span> &amp;&amp; data[k/<span class=\"number\">2</span>] &lt; data[k] &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å¤§èŠ‚ç‚¹ä¸æ–­ä¸Šæµ®</span></span><br><span class=\"line\">            data.swapAt(k/<span class=\"number\">2</span>, k)</span><br><span class=\"line\">            k = k / <span class=\"number\">2</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// å°å…ƒç´ ä¸‹æ²‰</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">sink</span><span class=\"params\">(<span class=\"number\">_</span> k: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> k = k</span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"number\">2</span>*k &lt;= <span class=\"type\">N</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> j = <span class=\"number\">2</span> * k</span><br><span class=\"line\">            <span class=\"keyword\">if</span> j &lt; <span class=\"type\">N</span> &amp;&amp; data[j] &lt; data[j+<span class=\"number\">1</span>] &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å·¦èŠ‚ç‚¹æ˜¯è¾ƒå°çš„èŠ‚ç‚¹,é€‰æ‹©å³èŠ‚ç‚¹ä½œä¸ºæ–°çš„æ ¹ç»“ç‚¹</span></span><br><span class=\"line\">                j += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœå½“å‰ k å·èŠ‚ç‚¹å°äºå…¶çˆ¶èŠ‚ç‚¹ï¼Œä¸‹æ²‰</span></span><br><span class=\"line\">            <span class=\"keyword\">guard</span> data[k] &lt; data[j] <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">break</span> &#125;</span><br><span class=\"line\">            data.swapAt(k, j)</span><br><span class=\"line\">            k = j</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">delMax</span><span class=\"params\">()</span></span> -&gt; <span class=\"type\">T</span> &#123;</span><br><span class=\"line\">        data.swapAt(<span class=\"number\">1</span>, <span class=\"type\">N</span>)</span><br><span class=\"line\">        <span class=\"keyword\">let</span> <span class=\"built_in\">max</span> = data.remove(at: <span class=\"type\">N</span>)</span><br><span class=\"line\">        <span class=\"type\">N</span> -= <span class=\"number\">1</span></span><br><span class=\"line\">        sink(<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">max</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">heapSort</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">sort</span><span class=\"params\">(<span class=\"number\">_</span> array: <span class=\"keyword\">inout</span> [Int])</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> <span class=\"type\">N</span> = array.<span class=\"built_in\">count</span> - <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> <span class=\"built_in\">stride</span>(from: <span class=\"type\">N</span>/<span class=\"number\">2</span>, through: <span class=\"number\">1</span>, by: -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            sink(&amp;array, k, <span class=\"type\">N</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"type\">N</span> &gt; <span class=\"number\">1</span> &#123;</span><br><span class=\"line\">            array.swapAt(<span class=\"number\">1</span>, <span class=\"type\">N</span>)</span><br><span class=\"line\">            <span class=\"type\">N</span> -= <span class=\"number\">1</span></span><br><span class=\"line\">            sink(&amp;array, <span class=\"number\">1</span>, <span class=\"type\">N</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// å¤§å…ƒç´ ä¸Šæµ®</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">swim</span><span class=\"params\">(<span class=\"number\">_</span> data: <span class=\"keyword\">inout</span> [Int], <span class=\"number\">_</span> k: Int, <span class=\"number\">_</span> N: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> k = k</span><br><span class=\"line\">        <span class=\"keyword\">while</span> k &gt; <span class=\"number\">1</span> &amp;&amp; data[k/<span class=\"number\">2</span>] &lt; data[k] &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å¤§èŠ‚ç‚¹ä¸æ–­ä¸Šæµ®</span></span><br><span class=\"line\">            data.swapAt(k/<span class=\"number\">2</span>, k)</span><br><span class=\"line\">            k = k / <span class=\"number\">2</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// å°å…ƒç´ ä¸‹æ²‰</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">sink</span><span class=\"params\">(<span class=\"number\">_</span> data: <span class=\"keyword\">inout</span> [Int], <span class=\"number\">_</span> k: Int, <span class=\"number\">_</span> N: Int)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> k = k</span><br><span class=\"line\">        <span class=\"keyword\">while</span> <span class=\"number\">2</span>*k &lt;= <span class=\"type\">N</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> j = <span class=\"number\">2</span> * k</span><br><span class=\"line\">            <span class=\"keyword\">if</span> j &lt; <span class=\"type\">N</span> &amp;&amp; data[j] &lt; data[j+<span class=\"number\">1</span>] &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å·¦èŠ‚ç‚¹æ˜¯è¾ƒå°çš„èŠ‚ç‚¹,é€‰æ‹©å³èŠ‚ç‚¹ä½œä¸ºæ–°çš„æ ¹ç»“ç‚¹</span></span><br><span class=\"line\">                j += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœå½“å‰ k å·èŠ‚ç‚¹å°äºå…¶çˆ¶èŠ‚ç‚¹ï¼Œä¸‹æ²‰</span></span><br><span class=\"line\">            <span class=\"keyword\">guard</span> data[k] &lt; data[j] <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">break</span> &#125;</span><br><span class=\"line\">            data.swapAt(k, j)</span><br><span class=\"line\">            k = j</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>å †æ’åºæ²¡å•¥çš„ï¼ŒåŸºæœ¬éƒ½è¯´å®Œäº†ã€‚éœ€è¦æ³¨æ„çš„å°±æ˜¯è¿™é‡Œçš„ for å¾ªç¯å’Œ python çš„ç›¸åŒï¼Œä¸èƒ½å¸¦ä»€ä¹ˆæ“ä½œï¼ŒåŒæ—¶å€’åºçš„è¯ï¼Œå¯ä»¥ç”¨ reserve æˆ–è€…æ˜¯ stride å°†æ­¥é•¿è®¾å®šä¸º -1ã€‚</p>\n<h2 id=\"Reference\">Reference<a href=\"post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰#Reference\"></a></h2><p><a href=\"http://www.cocoachina.com/ios/20150929/13624.html\" target=\"_blank\" rel=\"noopener\">æ€»ç»“ Swift ä¸­éšæœºæ•°çš„ä½¿ç”¨ -  CocoaChina è‹¹æœå¼€å‘ä¸­æ–‡ç«™ - æœ€çƒ­çš„iPhoneå¼€å‘ç¤¾åŒº æœ€çƒ­çš„è‹¹æœå¼€å‘ç¤¾åŒº æœ€çƒ­çš„iPadå¼€å‘ç¤¾åŒº</a></p>\n","prev":{"title":"è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„","link":"post/arc-02"},"next":{"title":"å¦‚ä½•é€Ÿæˆå‰ç«¯ä¸‰ä»¶å¥— ï¼ˆHTMLï¼‰","link":"post/å¦‚ä½•é€Ÿæˆå‰ç«¯ä¸‰ä»¶å¥— ï¼ˆHTMLï¼‰"},"plink":"https://xkeith.space/post/åŸºäºç®—æ³•çš„ Swift å­¦ä¹ ä¹‹è·¯ï¼ˆæ’åºï¼‰/","toc":[{"title":"æ’åº","id":"æ’åº","index":"1"},{"title":"é€‰æ‹©æ’åº","id":"é€‰æ‹©æ’åº","index":"2"},{"title":"æ’å…¥æ’åºï¼ˆå†’æ³¡æ’åºï¼‰","id":"æ’å…¥æ’åºï¼ˆå†’æ³¡æ’åºï¼‰","index":"3"},{"title":"å¸Œå°”æ’åº","id":"å¸Œå°”æ’åº","index":"4"},{"title":"å½’å¹¶æ’åº","id":"å½’å¹¶æ’åº","index":"5"},{"title":"å¿«é€Ÿæ’åº","id":"å¿«é€Ÿæ’åº","index":"6"},{"title":"å †æ’åº","id":"å †æ’åº","index":"7"},{"title":"Reference","id":"Reference","index":"8"}]}